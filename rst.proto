// RST (Relation Symbol Table) - A simplified code intelligence format for LLM navigation.
//
// This format provides a lightweight representation of symbol relationships,
// extracted from SCIP indexes for efficient code navigation.

syntax = "proto3";

package rst;

option go_package = "github.com/sourcegraph/scip/cmd/scip/rst";

// RST is the root message for a Relation Symbol Table
message RST {
  Metadata metadata = 1;
  map<string, Document> documents = 2;
}

message Metadata {
  string repo = 1;      // Repository identifier (e.g., github.com/sourcegraph/scip)
  string language = 2;  // Primary language of this RST file
}

message Document {
  string relative_path = 1;
  map<string, Symbol> symbols = 2;
}

message Symbol {
  string symbol = 1;           // Full SCIP symbol
  string kind = 2;             // Symbol kind (FUNC, STRUCT, METHOD, etc.)
  repeated string reference_by = 3;  // Symbols that reference this symbol
  repeated string dependence_on = 4; // Symbols this symbol depends on
  string signature = 5;        // Function/method signature (e.g., "func foo(bar string) error")
  int32 line = 6;              // Line number where symbol is defined
  string code = 7;             // Source code extracted by tree-sitter (for functions, methods, etc.)
}
